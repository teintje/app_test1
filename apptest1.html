<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Sensor Test</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; padding-top: 50px; }
        .card { background: white; margin: 20px auto; padding: 20px; width: 80%; border-radius: 10px; shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .value { font-size: 24px; font-weight: bold; color: #007bff; }
        button { padding: 15px 30px; font-size: 18px; cursor: pointer; background: #28a745; color: white; border: none; border-radius: 5px; }
    </style>
</head>
<body>

    <h1>Sensor Dashboard</h1>
    
    <div class="card">
        <p>Accelerometer (X-axis)</p>
        <div id="accelX" class="value">0.00</div>
    </div>

    <div class="card">
        <p>Gyroscope (Rotation Rate Z)</p>
        <div id="gyroZ" class="value">0.00</div>
    </div>

    <button id="start_btn">Enable Sensors</button>

    <script>
        const startBtn = document.getElementById('start_btn');

        startBtn.onclick = function() {
            // Check if the browser requires explicit permission (iOS and newer Android)
            if (typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            activateSensors();
                        }
                    })
                    .catch(console.error);
            } else {
                // For standard Android browsers
                activateSensors();
            }
            startBtn.style.display = 'none';
        };

        function activateSensors() {
            // Accelerometer
            window.addEventListener('devicemotion', (event) => {
                let x = event.accelerationIncludingGravity.x;
                document.getElementById('accelX').innerText = x.toFixed(2);
            });

            // Gyroscope
            window.addEventListener('deviceorientation', (event) => {
                let z = event.alpha; // alpha is rotation around the Z axis
                document.getElementById('gyroZ').innerText = z.toFixed(2);
            });
        }
    </script>
</body>
</html>